<div class="container ">

  <div class="row">

    <div class="col-md-4">
      <h5>Gestionar Medicos</h5>
      <div>
        <input placeholder="Buscar médico">
        <button class="btn btn-primary ms-2">Buscar</button>
      </div>
      <div class="container">
        <table class="table table-striped table-hover">
          <thead class="table-info">
          <tr>
            <th>Código</th>
            <th>Nombre</th>
            <th>Especialidad</th>
            <th></th>
          </tr>
          </thead>
          <tbody class="table-group-divider">
          <tr *ngFor="let item of medicos">
            <td><p>{{item.codigo}}</p></td>
            <td><p>{{item.nombre}}</p></td>
            <td><p>{{item.especialidad}}</p></td>

            <td><a routerLink="/detalleMedico/{{item.codigo}}" ><i class="fa-solid fa-circle-info me-2"></i>Ver detalle</a></td>

          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-md-8">
      <H5>Nuevo Medico</H5>
      <div>
        <form #f="ngForm" (ngSubmit)="registrar()">

          <div>
            <label class=" col-form-label">Correo electrónico: </label>
            <div class="col-sm-10">
              <input #correo="ngModel"
                     [ngClass]="correo.invalid && (correo.dirty || correo.touched) ? 'is-invalid' : ''" type="email"
                     name="correo" class="form-control" required email [(ngModel)]="registroMedicoDTO.correo" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Contraseña: </label>
            <div>
              <input #password="ngModel"
                     [ngClass]="password.invalid && (password.dirty || password.touched) ? 'is-invalid' : ''"
                     type="password" name="password" class="form-control" required
                     [(ngModel)]="registroMedicoDTO.password" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Repetir contraseña: </label>
            <div>
              <input #confirmaPassword="ngModel"
                     [ngClass]="confirmaPassword.invalid && (confirmaPassword.dirty || confirmaPassword.touched) ? 'is-invalid' : ''"
                     type="password" name="confirmaPassword" class="form-control" required
                     [(ngModel)]="registroMedicoDTO.confirmaPassword" />
            </div>
          </div>
          <p *ngIf="!sonIguales()" >Las contraseñas no coinciden</p>

          <div class="alert alert-danger" role="alert" *ngIf="!sonIguales()">Las contraseñas no
            coinciden</div>

          <div class="mb-3 row">
            <label class="col-form-label">Nombre: </label>
            <div>
              <input #nombre="ngModel"
                     [ngClass]="nombre.invalid && (nombre.dirty || nombre.touched) ? 'is-invalid' : ''" type="text"
                     name="nombre" class="form-control" required [(ngModel)]="registroMedicoDTO.nombre" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Cédula: </label>
            <div>
              <input #cedula="ngModel"
                     [ngClass]="cedula.invalid && (cedula.dirty || cedula.touched) ? 'is-invalid' : ''" type="text"
                     name="cedula" class="form-control" required [(ngModel)]="registroMedicoDTO.cedula" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Foto: </label>
            <div>
              <input type="file" name="urlFoto" class="form-control" required
                     (change)="onFileChange($event)" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Teléfono: </label>
            <div>
              <input #telefono="ngModel"
                     [ngClass]="telefono.invalid && (telefono.dirty || telefono.touched) ? 'is-invalid' : ''" type="text"
                     name="telefono" class="form-control" required [(ngModel)]="registroMedicoDTO.telefono" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Ciudad: </label>
            <div>
              <select name="ciudad" required class="form-select"
                      [(ngModel)]="registroMedicoDTO.ciudad">
                <option value="" selected>Seleccione una ciudad</option>
                <option [value]="item" *ngFor="let item of ciudades; index as i">{{item}}</option>
              </select>
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Especialidad: </label>
            <div>
              <select name="especialidad" required class="form-select"
                      [(ngModel)]="registroMedicoDTO.especialidad">
                <option value="" selected>Seleccione una especialidad</option>
                <option [value]="item" *ngFor="let item of especialidad; index as i">{{item}}</option>
              </select>
            </div>
          </div>

          <div class="mb-3 row">
            <label class="col-form-label">Hora inicio: </label>
            <div>
              <input #horaInicio="ngModel"
                     [ngClass]="horaInicio.invalid && (horaInicio.dirty || horaInicio.touched) ? 'is-invalid' : ''" type="text"
                     name="horaInicio" class="form-control" required [(ngModel)]="registroMedicoDTO.horaInicio" />
            </div>
          </div>

          <div class="mb-3 row">
            <label class=" col-form-label">Hora fin: </label>
            <div>
              <input #horaFin="ngModel"
                     [ngClass]="horaFin.invalid && (horaFin.dirty || horaFin.touched) ? 'is-invalid' : ''" type="text"
                     name="horaFin" class="form-control" required [(ngModel)]="registroMedicoDTO.horaFin" />
            </div>
          </div>


          <button class="btn btn-primary" type="submit" [disabled]="f.invalid || !sonIguales()">
            <i class="fa-solid fa-circle-plus me-1"></i>Guardar
          </button>
          <button class="btn btn-primary" type="submit" [disabled]="f.invalid || !sonIguales()">
            <i class="fa-solid fa-circle-plus me-1"></i>Editar
          </button>
          <button class="btn btn-primary" type="submit" [disabled]="f.invalid || !sonIguales()">
            <i class="fa-solid fa-circle-plus me-1"></i>Eliminar
          </button>
        </form>
      </div>

    </div>
  </div>
</div>
